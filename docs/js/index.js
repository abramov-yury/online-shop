!function(){var e={775:function(e,t,i){"use strict";i.d(t,{Ab:function(){return r},PC:function(){return n},p0:function(){return a}});var s=i(681);const a={[s.a.ESTATE]:"Недвижимость",[s.a.LAPTOPS]:"Ноутбук",[s.a.CAMERA]:"Фотоаппарат",[s.a.CARS]:"Автомобиль"},r={[a[s.a.ESTATE]]:{type:"Тип недвижимости",area:"Площадь, м2","rooms-count":"Количество комнат"},[a[s.a.LAPTOPS]]:{type:"Тип ноутбука","ram-value":"Объем оперативной памяти","screen-size":"Диагональ экрана","cpu-type":"Тип процессора"},[a[s.a.CAMERA]]:{type:"Тип фотоаппарата","matrix-resolution":"Разрешение матрицы",supporting:"Разрешение видео"},[a[s.a.CARS]]:{"body-type":"Тип кузова",transmission:"Коробка передач","production-year":"Год выпуска"}},n={[a[s.a.ESTATE]]:{flat:"Квартира",house:"Дом",apartment:"Апартаменты"},[a[s.a.LAPTOPS]]:{i3:"Intel Core i3",i5:"Intel Core i5",i7:"Intel Core i7",4:"4 Гб",8:"8 Гб",16:"16 Гб",ultrabook:"Ультрабук",home:"Домашний ноутбук",gaming:"Игровой ноутбук"},[a[s.a.CAMERA]]:{slr:"Зеркальный",digital:"Цифровой",mirrorless:"Беззеркальный",hd:"HD","full-hd":"Full HD","4k":"4K","5k":"5K"},[a[s.a.CARS]]:{auto:"Автомат",mechanic:"Механическая",sedan:"Седан",universal:"Универсал",hatchback:"Хэтчбэк",suv:"Внедорожник",coupe:"Купе"}}},681:function(e,t,i){"use strict";i.d(t,{a:function(){return s},b:function(){return a}});const s={ALL:"all",ESTATE:"estate",LAPTOPS:"laptops",CAMERA:"camera",CARS:"cars"},a={header:"Категории товаров",id:"categories",name:"categories",items:[{value:s.ALL,title:"Все"},{value:s.ESTATE,title:"Недвижимость"},{value:s.LAPTOPS,title:"Ноутбуки"},{value:s.CAMERA,title:"Фотоаппараты"},{value:s.CARS,title:"Автомобили"}]}},206:function(e,t,i){"use strict";i.d(t,{Gg:function(){return m},K5:function(){return v},ce:function(){return d},eK:function(){return a},rH:function(){return r},vm:function(){return _},xw:function(){return p}});var s=i(775);const a={form:"filter-form",slider:"range"},r=(e,t)=>Array.from(e).filter((e=>e.category===s.p0[t])),n=i(81);let o=null;const l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.forms[a.form];o=new FormData(e)},c=()=>o.get(a.slider).split(", "),u=e=>{const t=e.price;return t>=c()[0]&&t<=c()[1]},h=(e,t)=>!t.some((e=>o.get(e.name)))||t.some((t=>o.get(t.name)&&e===t.value)),d=e=>(l(),e.filter((e=>u(e)))),p=e=>(l(),e.filter((e=>u(e)&&h(e.filters.type,n.estate_type.items)&&(e=>e>=o.get(n.estate_area_name))(e.filters.area)&&(e=>{const t=o.get(n.estate_rooms.name);return!t||t===n.estate_rooms.items[0].value||t===n.estate_rooms.items[5].value&&e>=5||Number(t)===e})(e.filters["rooms-count"])))),m=e=>(l(),e.filter((e=>u(e)&&h(e.filters.type,n.laptop_type.items)&&h(e.filters["cpu-type"],n.laptop_cpu.items)&&(e=>{const t=o.get(n.laptop_ram.name);return!t||t===n.laptop_ram.items[0].value||Number(t)===e})(e.filters["ram-value"])&&(e=>{const t=o.get(n.laptop_screen_size.name);return!t||t===n.laptop_screen_size.items[0].value||Number(t)===Math.floor(e)})(e.filters["screen-size"])))),v=e=>(l(),e.filter((e=>u(e)&&h(e.filters.type,n.camera_type.items)&&(e=>{const t=o.get(n.camera_matrix_resolution.name);return t===n.camera_matrix_resolution.items[0].value||e>=Number(t)})(e.filters["matrix-resolution"])&&(e=>{const t=o.get(n.camera_video_resolution.name);return t===n.camera_video_resolution.items[0].value||e===t})(e.filters.supporting)))),_=e=>(l(),e.filter((e=>u(e)&&h(e.filters["body-type"],n.car_body_type.items)&&(e=>{const t=o.get(n.car_year.name);return t===n.car_year.items[0].value||e>=Number(t)})(e.filters["production-year"])&&(e=>{const t=o.get(n.car_transmission.name);return!t||t===n.car_transmission.items[0].value||e===t})(e.filters.transmission))))},564:function(e,t,i){"use strict";i.d(t,{dL:function(){return s},jx:function(){return a},ps:function(){return r}});const s="https://raw.githubusercontent.com/abramov-yury/my-assets/main/online-shop/",a=5,r=e=>{const t=[];for(let i=0;i<e.length&&(t.push(e[i]),!(t.length>=a));i++);return t}},406:function(e,t,i){"use strict";i.r(t),i.d(t,{RESULTS_FORM_NAME:function(){return a},RESULTS_SORTING:function(){return r},SortingValue:function(){return s},sortProducts:function(){return c}});const s={POPULAR:"popular",CHEAP:"cheap",NEW:"new"},a="results-form",r={legend:"Показать сначала:",name:"results-sorting",items:[{label:"Популярные",value:"popular",id:"sort-popular",checked:!0},{label:"Дешёвые",value:"cheap",id:"sort-cheap"},{label:"Новые",value:"new",id:"sort-new"}]},n=(e,t)=>e.id-t.id,o=(e,t)=>e.price-t.price,l=(e,t)=>t["publish-date"]-e["publish-date"],c=(e,t)=>{const i=Array.from(t);switch(e){case s.POPULAR:return t.sort(n);case s.CHEAP:return i.sort(o);case s.NEW:return i.sort(l)}}},518:function(e,t,i){var s=i(55);e.exports=function(e){var t="";return t=t+"<section"+s.attr("class",s.classes([`${e.parent}__app app`],[!0]),!1,!0)+'><h1 class="visually-hidden">Сайт объявлений</h1></section>'}},859:function(e,t,i){var s=i(55);e.exports=function(e){var t,a="",r={},n=e||{};return function(e){r.checkboxes=t=function(e="",i={}){this&&this.block,this&&this.attributes;a=a+"<fieldset"+s.attr("class",s.classes([`${e} checkboxes`],[!0]),!1,!0)+'><legend class="checkboxes__legend">'+s.escape(null==(t=i.legend)?"":t)+'</legend><ul class="checkboxes__list">',function(){var e=i.items;if("number"==typeof e.length)for(var r=0,n=e.length;r<n;r++){var o=e[r];a=a+'<li class="checkboxes__item"><input class="checkboxes__input visually-hidden" type="checkbox"'+s.attr("value",o.value,!0,!0)+s.attr("name",o.name,!0,!0)+s.attr("id",o.id,!0,!0)+'><label class="checkboxes__label"'+s.attr("for",o.id,!0,!0)+">"+s.escape(null==(t=o.label)?"":t)+"</label></li>"}else{n=0;for(var r in e){n++;o=e[r];a=a+'<li class="checkboxes__item"><input class="checkboxes__input visually-hidden" type="checkbox"'+s.attr("value",o.value,!0,!0)+s.attr("name",o.name,!0,!0)+s.attr("id",o.id,!0,!0)+'><label class="checkboxes__label"'+s.attr("for",o.id,!0,!0)+">"+s.escape(null==(t=o.label)?"":t)+"</label></li>"}}}.call(this),a+="</ul></fieldset>"},e=i(81).camera_type,a+='<div class="camera">',r.checkboxes("camera__checkboxes",e),a+="</div>"}.call(this,"camera_type"in n?n.camera_type:"undefined"!=typeof camera_type?camera_type:void 0),a}},14:function(e,t,i){var s=i(55);e.exports=function(e){var t,a="",r={},n=e||{};return function(n,o,l){r["radio-buttons"]=t=function(e="",i={},r="regular"){this&&this.block,this&&this.attributes;a=a+"<fieldset"+s.attr("class",s.classes([`${e} radio-buttons`],[!0]),!1,!0)+'><legend class="radio-buttons__legend">'+s.escape(null==(t=i.legend)?"":t)+'</legend><ul class="radio-buttons__list">',function(){var e=i.items;if("number"==typeof e.length)for(var n=0,o=e.length;n<o;n++){var c=e[n];a+='<li class="radio-buttons__item">',l=c.checked,a=a+'<input class="radio-buttons__input visually-hidden" type="radio"'+s.attr("name",i.name,!0,!0)+s.attr("id",c.id,!0,!0)+s.attr("value",c.value,!0,!0)+s.attr("checked",l,!0,!0)+"><label"+(s.attr("class",s.classes([`radio-buttons__label radio-buttons__label--${r}`],[!0]),!1,!0)+s.attr("for",c.id,!0,!0))+">"+s.escape(null==(t=c.label)?"":t),c.sup&&(a=a+'<sup class="radio-buttons__sup">'+s.escape(null==(t=c.sup)?"":t)+"</sup>"),a+="</label></li>"}else{o=0;for(var n in e){o++;c=e[n];a+='<li class="radio-buttons__item">',l=c.checked,a=a+'<input class="radio-buttons__input visually-hidden" type="radio"'+s.attr("name",i.name,!0,!0)+s.attr("id",c.id,!0,!0)+s.attr("value",c.value,!0,!0)+s.attr("checked",l,!0,!0)+"><label"+(s.attr("class",s.classes([`radio-buttons__label radio-buttons__label--${r}`],[!0]),!1,!0)+s.attr("for",c.id,!0,!0))+">"+s.escape(null==(t=c.label)?"":t),c.sup&&(a=a+'<sup class="radio-buttons__sup">'+s.escape(null==(t=c.sup)?"":t)+"</sup>"),a+="</label></li>"}}}.call(this),a+="</ul></fieldset>"},r.checkboxes=t=function(e="",i={}){this&&this.block,this&&this.attributes;a=a+"<fieldset"+s.attr("class",s.classes([`${e} checkboxes`],[!0]),!1,!0)+'><legend class="checkboxes__legend">'+s.escape(null==(t=i.legend)?"":t)+'</legend><ul class="checkboxes__list">',function(){var e=i.items;if("number"==typeof e.length)for(var r=0,n=e.length;r<n;r++){var o=e[r];a=a+'<li class="checkboxes__item"><input class="checkboxes__input visually-hidden" type="checkbox"'+s.attr("value",o.value,!0,!0)+s.attr("name",o.name,!0,!0)+s.attr("id",o.id,!0,!0)+'><label class="checkboxes__label"'+s.attr("for",o.id,!0,!0)+">"+s.escape(null==(t=o.label)?"":t)+"</label></li>"}else{n=0;for(var r in e){n++;o=e[r];a=a+'<li class="checkboxes__item"><input class="checkboxes__input visually-hidden" type="checkbox"'+s.attr("value",o.value,!0,!0)+s.attr("name",o.name,!0,!0)+s.attr("id",o.id,!0,!0)+'><label class="checkboxes__label"'+s.attr("for",o.id,!0,!0)+">"+s.escape(null==(t=o.label)?"":t)+"</label></li>"}}}.call(this),a+="</ul></fieldset>"},o=i(81),n=e.parent?`${e.parent}__car car`:"car",a=a+"<div"+s.attr("class",s.classes([n],[!0]),!1,!0)+">",r["radio-buttons"]("car__radio-buttons",o.car_transmission),r.checkboxes("car__checkboxes",o.car_body_type),a+="</div>"}.call(this,"class_name"in n?n.class_name:"undefined"!=typeof class_name?class_name:void 0,"data"in n?n.data:"undefined"!=typeof data?data:void 0,"isChecked"in n?n.isChecked:"undefined"!=typeof isChecked?isChecked:void 0),a}},217:function(e,t,i){var s=i(55);e.exports=function(e){var t,a="",r={},n=e||{};return function(n,o,l,c,u,h){r.checkboxes=t=function(e="",i={}){this&&this.block,this&&this.attributes;a=a+"<fieldset"+s.attr("class",s.classes([`${e} checkboxes`],[!0]),!1,!0)+'><legend class="checkboxes__legend">'+s.escape(null==(t=i.legend)?"":t)+'</legend><ul class="checkboxes__list">',function(){var e=i.items;if("number"==typeof e.length)for(var r=0,n=e.length;r<n;r++){var o=e[r];a=a+'<li class="checkboxes__item"><input class="checkboxes__input visually-hidden" type="checkbox"'+s.attr("value",o.value,!0,!0)+s.attr("name",o.name,!0,!0)+s.attr("id",o.id,!0,!0)+'><label class="checkboxes__label"'+s.attr("for",o.id,!0,!0)+">"+s.escape(null==(t=o.label)?"":t)+"</label></li>"}else{n=0;for(var r in e){n++;o=e[r];a=a+'<li class="checkboxes__item"><input class="checkboxes__input visually-hidden" type="checkbox"'+s.attr("value",o.value,!0,!0)+s.attr("name",o.name,!0,!0)+s.attr("id",o.id,!0,!0)+'><label class="checkboxes__label"'+s.attr("for",o.id,!0,!0)+">"+s.escape(null==(t=o.label)?"":t)+"</label></li>"}}}.call(this),a+="</ul></fieldset>"},r["radio-buttons"]=t=function(e="",i={},r="regular"){this&&this.block,this&&this.attributes;a=a+"<fieldset"+s.attr("class",s.classes([`${e} radio-buttons`],[!0]),!1,!0)+'><legend class="radio-buttons__legend">'+s.escape(null==(t=i.legend)?"":t)+'</legend><ul class="radio-buttons__list">',function(){var e=i.items;if("number"==typeof e.length)for(var n=0,o=e.length;n<o;n++){var l=e[n];a+='<li class="radio-buttons__item">',u=l.checked,a=a+'<input class="radio-buttons__input visually-hidden" type="radio"'+s.attr("name",i.name,!0,!0)+s.attr("id",l.id,!0,!0)+s.attr("value",l.value,!0,!0)+s.attr("checked",u,!0,!0)+"><label"+(s.attr("class",s.classes([`radio-buttons__label radio-buttons__label--${r}`],[!0]),!1,!0)+s.attr("for",l.id,!0,!0))+">"+s.escape(null==(t=l.label)?"":t),l.sup&&(a=a+'<sup class="radio-buttons__sup">'+s.escape(null==(t=l.sup)?"":t)+"</sup>"),a+="</label></li>"}else{o=0;for(var n in e){o++;l=e[n];a+='<li class="radio-buttons__item">',u=l.checked,a=a+'<input class="radio-buttons__input visually-hidden" type="radio"'+s.attr("name",i.name,!0,!0)+s.attr("id",l.id,!0,!0)+s.attr("value",l.value,!0,!0)+s.attr("checked",u,!0,!0)+"><label"+(s.attr("class",s.classes([`radio-buttons__label radio-buttons__label--${r}`],[!0]),!1,!0)+s.attr("for",l.id,!0,!0))+">"+s.escape(null==(t=l.label)?"":t),l.sup&&(a=a+'<sup class="radio-buttons__sup">'+s.escape(null==(t=l.sup)?"":t)+"</sup>"),a+="</label></li>"}}}.call(this),a+="</ul></fieldset>"},o=(c=i(81)).estate_type,h=c.estate_rooms,n=c.estate_area_name,l=e.parent?`${e.parent}__estate estate`:"estate",a=a+"<div"+s.attr("class",s.classes([l],[!0]),!1,!0)+">",r.checkboxes("estate__checkboxes",o),a=a+'<div class="estate__area"><label class="estate__label"'+s.attr("for",n,!0,!0)+'>Минимальная площадь, м<sup class="estate__sup">2</sup></label><input class="estate__input js-estate__area-field" type="text"'+s.attr("name",n,!0,!0)+s.attr("id",n,!0,!0)+' placeholder="0"></div>',r["radio-buttons"]("estate__radio-buttons",h),a+="</div>"}.call(this,"area"in n?n.area:"undefined"!=typeof area?area:void 0,"checkbox"in n?n.checkbox:"undefined"!=typeof checkbox?checkbox:void 0,"class_name"in n?n.class_name:"undefined"!=typeof class_name?class_name:void 0,"data"in n?n.data:"undefined"!=typeof data?data:void 0,"isChecked"in n?n.isChecked:"undefined"!=typeof isChecked?isChecked:void 0,"radio_buttons"in n?n.radio_buttons:"undefined"!=typeof radio_buttons?radio_buttons:void 0),a}},16:function(e,t,i){var s=i(55);e.exports=function(e){var t="",i=e||{};return function(i,a,r,n,o,l){i=e.parent?`${e.parent}__favorite favorite`:"favorite",a=e.parent?`favorite-${l}-${e.id}`:`favorite-${e.id}`,o="large"===e.modifier?33:22,r="large"===e.modifier?30:20,n=e.modifier?e.modifier:"medium",t=t+"<div"+s.attrs({class:i},!0)+'><input class="visually-hidden favorite__checkbox js-favorite__checkbox" type="checkbox"'+s.attr("id",a,!0,!0)+s.attr("name",`favorite-product-${e.id}`,!0,!0)+'><label class="favorite__label"'+s.attr("for",a,!0,!0)+"><svg"+(s.attr("class",s.classes([`favorite__icon favorite__icon--${n}`],[!0]),!1,!0)+s.attr("width",o,!0,!0)+s.attr("height",r,!0,!0))+' role="presentation" hidden="true"><use href="#heart-icon"></use></svg></label></div>'}.call(this,"cls"in i?i.cls:"undefined"!=typeof cls?cls:void 0,"favorite_id"in i?i.favorite_id:"undefined"!=typeof favorite_id?favorite_id:void 0,"icon_height"in i?i.icon_height:"undefined"!=typeof icon_height?icon_height:void 0,"icon_modifier"in i?i.icon_modifier:"undefined"!=typeof icon_modifier?icon_modifier:void 0,"icon_widht"in i?i.icon_widht:"undefined"!=typeof icon_widht?icon_widht:void 0,"parent"in i?i.parent:"undefined"!=typeof parent?parent:void 0),t}},487:function(e,t,i){var s=i(55);e.exports=function(e){var t="",a=e||{};return function(a){a=i(206).eK.form,t=t+"<form"+(s.attr("class",s.classes([`${e.parent}__filter filter`],[!0]),!1,!0)+s.attr("name",a,!0,!0))+'><h2 class="filter__title">Фильтр</h2><button class="filter__button js-filter__button" type="button">Показать</button></form>'}.call(this,"form_name"in a?a.form_name:"undefined"!=typeof form_name?form_name:void 0),t}},23:function(e,t,i){var s=i(55);e.exports=function(e){var t,i="";return i=i+'<div class="info"><p class="info__message">'+s.escape(null==(t=e.message)?"":t)+'</p><p class="info__notion">'+s.escape(null==(t=e.notion)?"":t)+"</p></div>"}},51:function(e,t,i){var s=i(55);e.exports=function(e){var t,a="",r={},n=e||{};return function(e,n,o,l,c,u){r.checkboxes=t=function(e="",i={}){this&&this.block,this&&this.attributes;a=a+"<fieldset"+s.attr("class",s.classes([`${e} checkboxes`],[!0]),!1,!0)+'><legend class="checkboxes__legend">'+s.escape(null==(t=i.legend)?"":t)+'</legend><ul class="checkboxes__list">',function(){var e=i.items;if("number"==typeof e.length)for(var r=0,n=e.length;r<n;r++){var o=e[r];a=a+'<li class="checkboxes__item"><input class="checkboxes__input visually-hidden" type="checkbox"'+s.attr("value",o.value,!0,!0)+s.attr("name",o.name,!0,!0)+s.attr("id",o.id,!0,!0)+'><label class="checkboxes__label"'+s.attr("for",o.id,!0,!0)+">"+s.escape(null==(t=o.label)?"":t)+"</label></li>"}else{n=0;for(var r in e){n++;o=e[r];a=a+'<li class="checkboxes__item"><input class="checkboxes__input visually-hidden" type="checkbox"'+s.attr("value",o.value,!0,!0)+s.attr("name",o.name,!0,!0)+s.attr("id",o.id,!0,!0)+'><label class="checkboxes__label"'+s.attr("for",o.id,!0,!0)+">"+s.escape(null==(t=o.label)?"":t)+"</label></li>"}}}.call(this),a+="</ul></fieldset>"},r["radio-buttons"]=t=function(e="",i={},r="regular"){this&&this.block,this&&this.attributes;a=a+"<fieldset"+s.attr("class",s.classes([`${e} radio-buttons`],[!0]),!1,!0)+'><legend class="radio-buttons__legend">'+s.escape(null==(t=i.legend)?"":t)+'</legend><ul class="radio-buttons__list">',function(){var e=i.items;if("number"==typeof e.length)for(var o=0,l=e.length;o<l;o++){var c=e[o];a+='<li class="radio-buttons__item">',n=c.checked,a=a+'<input class="radio-buttons__input visually-hidden" type="radio"'+s.attr("name",i.name,!0,!0)+s.attr("id",c.id,!0,!0)+s.attr("value",c.value,!0,!0)+s.attr("checked",n,!0,!0)+"><label"+(s.attr("class",s.classes([`radio-buttons__label radio-buttons__label--${r}`],[!0]),!1,!0)+s.attr("for",c.id,!0,!0))+">"+s.escape(null==(t=c.label)?"":t),c.sup&&(a=a+'<sup class="radio-buttons__sup">'+s.escape(null==(t=c.sup)?"":t)+"</sup>"),a+="</label></li>"}else{l=0;for(var o in e){l++;c=e[o];a+='<li class="radio-buttons__item">',n=c.checked,a=a+'<input class="radio-buttons__input visually-hidden" type="radio"'+s.attr("name",i.name,!0,!0)+s.attr("id",c.id,!0,!0)+s.attr("value",c.value,!0,!0)+s.attr("checked",n,!0,!0)+"><label"+(s.attr("class",s.classes([`radio-buttons__label radio-buttons__label--${r}`],[!0]),!1,!0)+s.attr("for",c.id,!0,!0))+">"+s.escape(null==(t=c.label)?"":t),c.sup&&(a=a+'<sup class="radio-buttons__sup">'+s.escape(null==(t=c.sup)?"":t)+"</sup>"),a+="</label></li>"}}}.call(this),a+="</ul></fieldset>"},u=(e=i(81)).laptop_type,l=e.laptop_ram,c=e.laptop_screen_size,o=e.laptop_cpu,a+='<div class="laptop">',r.checkboxes("laptop__checkboxes",u),r["radio-buttons"]("laptop__radio-buttons",l),r["radio-buttons"]("laptop__radio-buttons",c),r.checkboxes("laptop__checkboxes",o),a+="</div>"}.call(this,"date"in n?n.date:"undefined"!=typeof date?date:void 0,"isChecked"in n?n.isChecked:"undefined"!=typeof isChecked?isChecked:void 0,"laptop_cpu"in n?n.laptop_cpu:"undefined"!=typeof laptop_cpu?laptop_cpu:void 0,"laptop_ram"in n?n.laptop_ram:"undefined"!=typeof laptop_ram?laptop_ram:void 0,"laptop_screen_size"in n?n.laptop_screen_size:"undefined"!=typeof laptop_screen_size?laptop_screen_size:void 0,"laptop_type"in n?n.laptop_type:"undefined"!=typeof laptop_type?laptop_type:void 0),a}},829:function(e,t,i){i(55);e.exports=function(e){var t="";return t+='<div class="lost-page"><h2 class="lost-page__title"> Страница не найдена</h2><p class="lost-page__text">404</p></div>'}},3:function(e,t,i){var s=i(55);e.exports=function(e){var t,a="",r={},n=e||{};return function(n,o,l,c,u,h,d,p,m,v,_,g,f,b,y,w,x,C,k,E,P,S){r["publish-date"]=t=function(e="",i){this&&this.block,this&&this.attributes;w={0:"Января",1:"Февраля",2:"Марта",3:"Апреля",4:"Мая",5:"Июня",6:"Июля",7:"Августа",8:"Сентября",9:"Октября",10:"Ноября",11:"Декабря"},h=new n(o(i)).getDate(),y=w[new n(o(i)).getMonth()],S=new n(o(i)).getFullYear(),a=a+"<span"+s.attr("class",s.classes([`${e} publish-date`],[!0]),!1,!0)+">"+s.escape(null==(t=h)?"":t)+" "+s.escape(null==(t=y)?"":t)+" "+s.escape(null==(t=S)?"":t)+" года</span>"},r["button-cross"]=t=function(e={}){this&&this.block,this&&this.attributes;a=a+"<button"+s.attr("class",s.classes([`${e.class_name} button-cross`],[!0]),!1,!0)+' type="button"><span class="button-cross__text">'+s.escape(null==(t=e.text)?"":t)+'</span><svg class="button-cross__icon" width="16" height="16" aria-hidden="true" role="presentation"><use href="#cross-icon"></use></svg></button>'},r.picture=t=function(e){this&&this.block,this&&this.attributes;E=i(564).dL,C=!!e["picture class name"]&&e["picture class name"],g=!!e["image class name"]&&e["image class name"],b=!!e.width&&e.width,f=!!e.height&&e.height,a=a+"<picture"+s.attrs({class:C},!0)+'><source type="image/webp"'+s.attr("srcset",`\n            ${E}${e.photo}.webp,\n            ${E}${e.photo}@2x.webp 2x,\n            ${E}${e.photo}@3x.webp 3x,\n            ${E}${e.photo}@4x.webp 4x,\n          `,!0,!0)+"><img"+s.attrs(s.merge([{srcset:s.escape(`\n              ${E}${e.photo}@2x.jpg 2x,\n              ${E}${e.photo}@3x.jpg 3x,\n              ${E}${e.photo}@4x.jpg 4x,\n            `),src:s.escape(`${E}${e.photo}.jpg`),alt:s.escape(`${e.name}`),"data-img-name":s.escape(`${e.photo}`),loading:"lazy"},{width:b,height:f,class:g}]),!0)+"></picture>"},v=i(775).Ab,_=i(775).PC,r.characteristics=t=function(e){this&&this.block,this&&this.attributes;c=v[e.category],u=_[e.category],p=e=>"-"!==e[1]&&""!==e[1],(m=l.entries(e.filters).filter(p)).length&&(a=a+"<dl"+s.attr("class",s.classes([`${e.class_name} characteristics`],[!0]),!1,!0)+">",function(){var e=m;if("number"==typeof e.length)for(var i=0,r=e.length;i<r;i++){var n=e[i];a=a+'<div class="characteristic"><dt class="characteristic__term">'+s.escape(null==(t=c[n[0]])?"":t)+"</dt>",d=u[n[1]]?u[n[1]]:n[1],a=a+'<dd class="characteristic__definition">'+s.escape(null==(t=d)?"":t)+"</dd></div>"}else{r=0;for(var i in e){r++;n=e[i];a=a+'<div class="characteristic"><dt class="characteristic__term">'+s.escape(null==(t=c[n[0]])?"":t)+"</dt>",d=u[n[1]]?u[n[1]]:n[1],a=a+'<dd class="characteristic__definition">'+s.escape(null==(t=d)?"":t)+"</dd></div>"}}}.call(this),a+="</dl>")},r.seller=t=function(e){this&&this.block,this&&this.attributes;a=a+"<div"+s.attr("class",s.classes([`${e.class_name} seller`],[!0]),!1,!0)+'><h3 class="seller__title">Продавец</h3><div class="seller__data"><a class="seller__name" href="#">'+s.escape(null==(t=e.name)?"":t)+"</a>",P="seller__rating",e.rating>=4.8&&(P+=" seller__rating--good"),e.rating<4&&(P+=" seller__rating--bad"),a=a+"<div"+s.attr("class",s.classes([P],[!0]),!1,!0)+">"+s.escape(null==(t=e.rating)?"":t)+"</div></div></div>"},k=e.price.toLocaleString(),x={photo:e.photos[0],name:e.name,width:520,height:340,"picture class name":"js-popup__main-picture"},a+='<section class="popup"><div class="popup__inner js-popup__inner"><header class="popup__header">',r["publish-date"]("popup__date",e["publish-date"]),a=a+'<h3 class="popup__title">'+s.escape(null==(t=e.name)?"":t)+'</h3><p class="popup__price">'+s.escape(null==(t=k)?"":t)+" &#8381;</p>",r["button-cross"]({class_name:"popup__button-cross js-popup__button-cross",text:"Закыть объявление"}),a+='</header><div class="popup__columns"><div class="popup__left"><div class="popup__gallery"><div class="popup__picture-wrapper">',r.picture(x),a+='</div><ul class="popup__gallery-list js-popup__gallery-list">',function(){var t=e.photos;if("number"==typeof t.length)for(var i=0,s=t.length;i<s;i++){var n=t[i];a+='<li class="popup__gallery-item">',r.picture({photo:n,width:124,height:80,name:e.name}),a+="</li>"}else{s=0;for(var i in t){s++;n=t[i];a+='<li class="popup__gallery-item">',r.picture({photo:n,width:124,height:80,name:e.name}),a+="</li>"}}}.call(this),a+="</ul></div>",r.characteristics({class_name:"popup__characteristics",category:e.category,filters:e.filters}),r.seller({class_name:"popup__seller",name:e.seller.name,rating:e.seller.rating}),a=a+'<div class="popup__description"><h3 class="popup__description-title">Описание товара</h3><p class="popup__description-text">'+s.escape(null==(t=e.description)?"":t)+'</p></div></div><div class="popup__right"><div class="popup__map"'+s.attr("id",`map-${e.id}`,!0,!0)+'></div><p class="popup__address">'+s.escape(null==(t=e.address.city)?"":t)+", <br>"+s.escape(null==(t=e.address.street)?"":t)+", <br>"+s.escape(null==(t=e.address.building)?"":t)+"</p></div></div></div></section>"}.call(this,"Date"in n?n.Date:"undefined"!=typeof Date?Date:void 0,"Number"in n?n.Number:"undefined"!=typeof Number?Number:void 0,"Object"in n?n.Object:"undefined"!=typeof Object?Object:void 0,"adapter_names"in n?n.adapter_names:"undefined"!=typeof adapter_names?adapter_names:void 0,"adapter_values"in n?n.adapter_values:"undefined"!=typeof adapter_values?adapter_values:void 0,"date"in n?n.date:"undefined"!=typeof date?date:void 0,"definition"in n?n.definition:"undefined"!=typeof definition?definition:void 0,"filter_check"in n?n.filter_check:"undefined"!=typeof filter_check?filter_check:void 0,"filters"in n?n.filters:"undefined"!=typeof filters?filters:void 0,"filters_names"in n?n.filters_names:"undefined"!=typeof filters_names?filters_names:void 0,"filters_values"in n?n.filters_values:"undefined"!=typeof filters_values?filters_values:void 0,"image_class_name"in n?n.image_class_name:"undefined"!=typeof image_class_name?image_class_name:void 0,"image_height"in n?n.image_height:"undefined"!=typeof image_height?image_height:void 0,"image_width"in n?n.image_width:"undefined"!=typeof image_width?image_width:void 0,"month"in n?n.month:"undefined"!=typeof month?month:void 0,"months"in n?n.months:"undefined"!=typeof months?months:void 0,"picture"in n?n.picture:"undefined"!=typeof picture?picture:void 0,"picture_class_name"in n?n.picture_class_name:"undefined"!=typeof picture_class_name?picture_class_name:void 0,"price"in n?n.price:"undefined"!=typeof price?price:void 0,"product_images_path"in n?n.product_images_path:"undefined"!=typeof product_images_path?product_images_path:void 0,"rating_class_name"in n?n.rating_class_name:"undefined"!=typeof rating_class_name?rating_class_name:void 0,"year"in n?n.year:"undefined"!=typeof year?year:void 0),a}},784:function(e,t,i){var s=i(55);e.exports=function(e){var t,i="",a=e||{};return function(a,r,n){for(n="preloader",a=e.parent?`${e.parent}__${n} ${n} js-${n}`:`${n} js-${n}`,r=0,i=i+"<div"+s.attr("class",s.classes([a],[!0]),!1,!0)+">";r<12;)i=i+'<div class="preloader__item">'+s.escape(null==(t=++r)?"":t)+"</div>";i+="</div>"}.call(this,"class_name"in a?a.class_name:"undefined"!=typeof class_name?class_name:void 0,"n"in a?a.n:"undefined"!=typeof n?n:void 0,"name"in a?a.name:"undefined"!=typeof name?name:void 0),i}},423:function(e,t,i){var s=i(55);e.exports=function(e){var t,a="",r={},n=e||{};return function(n,o,l,c,u,h,d,p,m,v,_,g,f,b,y,w,x){r["publish-date"]=t=function(e="",i){this&&this.block,this&&this.attributes;v={0:"Января",1:"Февраля",2:"Марта",3:"Апреля",4:"Мая",5:"Июня",6:"Июля",7:"Августа",8:"Сентября",9:"Октября",10:"Ноября",11:"Декабря"},c=new n(o(i)).getDate(),m=v[new n(o(i)).getMonth()],x=new n(o(i)).getFullYear(),a=a+"<span"+s.attr("class",s.classes([`${e} publish-date`],[!0]),!1,!0)+">"+s.escape(null==(t=c)?"":t)+" "+s.escape(null==(t=m)?"":t)+" "+s.escape(null==(t=x)?"":t)+" года</span>"},r.picture=t=function(e){this&&this.block,this&&this.attributes;y=i(564).dL,f=!!e["picture class name"]&&e["picture class name"],h=!!e["image class name"]&&e["image class name"],p=!!e.width&&e.width,d=!!e.height&&e.height,a=a+"<picture"+s.attrs({class:f},!0)+'><source type="image/webp"'+s.attr("srcset",`\n            ${y}${e.photo}.webp,\n            ${y}${e.photo}@2x.webp 2x,\n            ${y}${e.photo}@3x.webp 3x,\n            ${y}${e.photo}@4x.webp 4x,\n          `,!0,!0)+"><img"+s.attrs(s.merge([{srcset:s.escape(`\n              ${y}${e.photo}@2x.jpg 2x,\n              ${y}${e.photo}@3x.jpg 3x,\n              ${y}${e.photo}@4x.jpg 4x,\n            `),src:s.escape(`${y}${e.photo}.jpg`),alt:s.escape(`${e.name}`),"data-img-name":s.escape(`${e.photo}`),loading:"lazy"},{width:p,height:d,class:h}]),!0)+"></picture>"},b=e.price.toLocaleString(),u=null,w=null,e.photos.length>1&&(u=i(564).ps(e.photos),w=i(564).jx),l=e.parent?`${e.parent}__product product`:"product",g={"picture class name":"js-product__picture","image class name":"product__image js-product__image",photo:e.photos[0],name:e.name},a=a+"<div"+s.attr("class",s.classes([l],[!0]),!1,!0)+'><div class="product__navigation js-product__navigation">',r.picture(g),u&&(a+='<ul class="product__navigation-list">',function(){var e=u;if("number"==typeof e.length)for(var t=0,i=e.length;t<i;t++){e[t];a=a+'<li class="product__navigation-item js-product__navigation-item"'+s.attr("data-frame",t,!0,!0)+"></li>"}else{i=0;for(var t in e){i++;e[t];a=a+'<li class="product__navigation-item js-product__navigation-item"'+s.attr("data-frame",t,!0,!0)+"></li>"}}}.call(this),a+="</ul>"),e.photos.length>w&&(a+='<div class="product__more-photos js-product__more-photos">',_=e.photos.length-w,a=a+"+ "+s.escape(null==(t=_)?"":t)+" фото</div>"),a=a+'</div><div class="product__content"><div class="product__description"><h3 class="product__title"><a class="product__link js-product__link" href="#">'+s.escape(null==(t=e.name)?"":t)+'</a></h3><p class="product__price">'+s.escape(null==(t=b)?"":t)+' &#8381;</p><p class="product__address">'+s.escape(null==(t=e.address.city)?"":t)+", "+s.escape(null==(t=e.address.street)?"":t)+"</p></div>",r["publish-date"]("product__date",e["publish-date"]),a+="</div></div>"}.call(this,"Date"in n?n.Date:"undefined"!=typeof Date?Date:void 0,"Number"in n?n.Number:"undefined"!=typeof Number?Number:void 0,"cls"in n?n.cls:"undefined"!=typeof cls?cls:void 0,"date"in n?n.date:"undefined"!=typeof date?date:void 0,"frames"in n?n.frames:"undefined"!=typeof frames?frames:void 0,"image_class_name"in n?n.image_class_name:"undefined"!=typeof image_class_name?image_class_name:void 0,"image_height"in n?n.image_height:"undefined"!=typeof image_height?image_height:void 0,"image_width"in n?n.image_width:"undefined"!=typeof image_width?image_width:void 0,"month"in n?n.month:"undefined"!=typeof month?month:void 0,"months"in n?n.months:"undefined"!=typeof months?months:void 0,"number"in n?n.number:"undefined"!=typeof number?number:void 0,"picture"in n?n.picture:"undefined"!=typeof picture?picture:void 0,"picture_class_name"in n?n.picture_class_name:"undefined"!=typeof picture_class_name?picture_class_name:void 0,"price"in n?n.price:"undefined"!=typeof price?price:void 0,"product_images_path"in n?n.product_images_path:"undefined"!=typeof product_images_path?product_images_path:void 0,"product_navigation_limit"in n?n.product_navigation_limit:"undefined"!=typeof product_navigation_limit?product_navigation_limit:void 0,"year"in n?n.year:"undefined"!=typeof year?year:void 0),a}},881:function(e,t,i){var s=i(55);e.exports=function(e){var t="",a=e||{};return function(a,r){r=i(206).eK.slider,a=e.parent?`${e.parent}__range range`:"range",t=t+"<div"+s.attr("class",s.classes([a],[!0]),!1,!0)+'><label class="range__label" for="range">Цена, ₽</label><div class="range__tooltips-wrapper"><p class="range__tooltip range__tooltip--left"><span class="range__tooltip--beginning">От</span><span class="range__tooltip--result">9000</span></p><p class="range__tooltip range__tooltip--right"><span class="range__tooltip--beginning">До</span><span class="range__tooltip--result">30000000</span></p></div><div class="range__input-wrapper"><input class="range__input" type="text" id="range"'+s.attr("name",r,!0,!0)+"></div></div>"}.call(this,"class_name"in a?a.class_name:"undefined"!=typeof class_name?class_name:void 0,"slider_name"in a?a.slider_name:"undefined"!=typeof slider_name?slider_name:void 0),t}},102:function(e,t,i){var s=i(55);e.exports=function(e){var t,a="",r={},n=e||{};return function(n,o){r["radio-buttons"]=t=function(e="",i={},r="regular"){this&&this.block,this&&this.attributes;a=a+"<fieldset"+s.attr("class",s.classes([`${e} radio-buttons`],[!0]),!1,!0)+'><legend class="radio-buttons__legend">'+s.escape(null==(t=i.legend)?"":t)+'</legend><ul class="radio-buttons__list">',function(){var e=i.items;if("number"==typeof e.length)for(var n=0,l=e.length;n<l;n++){var c=e[n];a+='<li class="radio-buttons__item">',o=c.checked,a=a+'<input class="radio-buttons__input visually-hidden" type="radio"'+s.attr("name",i.name,!0,!0)+s.attr("id",c.id,!0,!0)+s.attr("value",c.value,!0,!0)+s.attr("checked",o,!0,!0)+"><label"+(s.attr("class",s.classes([`radio-buttons__label radio-buttons__label--${r}`],[!0]),!1,!0)+s.attr("for",c.id,!0,!0))+">"+s.escape(null==(t=c.label)?"":t),c.sup&&(a=a+'<sup class="radio-buttons__sup">'+s.escape(null==(t=c.sup)?"":t)+"</sup>"),a+="</label></li>"}else{l=0;for(var n in e){l++;c=e[n];a+='<li class="radio-buttons__item">',o=c.checked,a=a+'<input class="radio-buttons__input visually-hidden" type="radio"'+s.attr("name",i.name,!0,!0)+s.attr("id",c.id,!0,!0)+s.attr("value",c.value,!0,!0)+s.attr("checked",o,!0,!0)+"><label"+(s.attr("class",s.classes([`radio-buttons__label radio-buttons__label--${r}`],[!0]),!1,!0)+s.attr("for",c.id,!0,!0))+">"+s.escape(null==(t=c.label)?"":t),c.sup&&(a=a+'<sup class="radio-buttons__sup">'+s.escape(null==(t=c.sup)?"":t)+"</sup>"),a+="</label></li>"}}}.call(this),a+="</ul></fieldset>"},n=i(406),a=a+"<section"+s.attr("class",s.classes([`${e.parent}__results results`],[!0]),!1,!0)+'><header class="results__head js-results__head"><h2 class="results__title">Результаты</h2><form class="results__form js-results__form"'+s.attr("name",n.RESULTS_FORM_NAME,!0,!0)+">",r["radio-buttons"]("results__radio-buttons",n.RESULTS_SORTING,"tight"),a+='</form><button class="results__favorite js-results__favorite" type="button"><svg class="results__heart-icon" width="22" height="20" role="presentation" aria-hidden="true"><use href="#heart-icon"></use></svg><span class="results__button-text">Показать избранные</span></button></header><div class="results__container js-results__container"></div></section>'}.call(this,"Sorting"in n?n.Sorting:"undefined"!=typeof Sorting?Sorting:void 0,"isChecked"in n?n.isChecked:"undefined"!=typeof isChecked?isChecked:void 0),a}},70:function(e,t,i){var s=i(55);e.exports=function(e){var t,i="";return i=i+"<div"+s.attr("class",s.classes([`${e.parent}__select select`],[!0]),!1,!0)+'><label class="select__label"'+s.attr("for",e.id,!0,!0)+">"+s.escape(null==(t=e.header)?"":t)+'</label><select class="select__options js-select__options"'+s.attr("id",e.id,!0,!0)+s.attr("name",e.name,!0,!0)+">",function(){var a=e.items;if("number"==typeof a.length)for(var r=0,n=a.length;r<n;r++){var o=a[r];i=e.selectedOption&&o.value===e.selectedOption?i+"<option"+(s.attr("value",o.value,!0,!0)+s.attr("selected",!0,!0,!0))+">"+s.escape(null==(t=o.title)?"":t)+"</option>":i+"<option"+s.attr("value",o.value,!0,!0)+">"+s.escape(null==(t=o.title)?"":t)+"</option>"}else{n=0;for(var r in a){n++;o=a[r];i=e.selectedOption&&o.value===e.selectedOption?i+"<option"+(s.attr("value",o.value,!0,!0)+s.attr("selected",!0,!0,!0))+">"+s.escape(null==(t=o.title)?"":t)+"</option>":i+"<option"+s.attr("value",o.value,!0,!0)+">"+s.escape(null==(t=o.title)?"":t)+"</option>"}}}.call(this),i+='</select><svg class="select__icon" width="14" height="8" aria-hidden="true" role="presentation"><use href="#down-arrowhead"></use></svg></div>'}},55:function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty;function a(e,t){return Array.isArray(e)?function(e,t){for(var i,s="",r="",n=Array.isArray(t),o=0;o<e.length;o++)(i=a(e[o]))&&(n&&t[o]&&(i=l(i)),s=s+r+i,r=" ");return s}(e,t):e&&"object"==typeof e?function(e){var t="",i="";for(var a in e)a&&e[a]&&s.call(e,a)&&(t=t+i+a,i=" ");return t}(e):e||""}function r(e){if(!e)return"";if("object"==typeof e){var t="";for(var i in e)s.call(e,i)&&(t=t+i+":"+e[i]+";");return t}return e+""}function n(e,t,i,s){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(s?e:e+'="'+e+'"');var a=typeof t;return"object"!==a&&"function"!==a||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),i||-1===t.indexOf('"'))?(i&&(t=l(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,i){if(1===arguments.length){for(var s=t[0],a=1;a<t.length;a++)s=e(s,t[a]);return s}for(var n in i)if("class"===n){var o=t[n]||[];t[n]=(Array.isArray(o)?o:[o]).concat(i[n]||[])}else if("style"===n){o=(o=r(t[n]))&&";"!==o[o.length-1]?o+";":o;var l=r(i[n]);l=l&&";"!==l[l.length-1]?l+";":l,t[n]=o+l}else t[n]=i[n];return t},t.classes=a,t.style=r,t.attr=n,t.attrs=function(e,t){var i="";for(var o in e)if(s.call(e,o)){var l=e[o];if("class"===o){l=a(l),i=n(o,l,!1,t)+i;continue}"style"===o&&(l=r(l)),i+=n(o,l,!1,t)}return i};var o=/["&<>]/;function l(e){var t=""+e,i=o.exec(t);if(!i)return e;var s,a,r,n="";for(s=i.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(n+=t.substring(a,s)),a=s+1,n+=r}return a!==s?n+t.substring(a,s):n}t.escape=l,t.rethrow=function e(t,s,a,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&s||r))throw t.message+=" on line "+a,t;var n,o,l,c;try{r=r||i(835).readFileSync(s,{encoding:"utf8"}),n=3,o=r.split("\n"),l=Math.max(a-n,0),c=Math.min(o.length,a+n)}catch(i){return t.message+=" - could not read from "+s+" ("+i.message+")",void e(t,null,a)}n=o.slice(l,c).map((function(e,t){var i=t+l+1;return(i==a?"  > ":"    ")+i+"| "+e})).join("\n"),t.path=s;try{t.message=(s||"Pug")+":"+a+"\n"+n+"\n\n"+t.message}catch(e){}throw t}},835:function(){},81:function(e){"use strict";e.exports=JSON.parse('{"estate_type":{"legend":"Тип недвижимости","items":[{"label":"Дом","name":"house","value":"house","id":"house_type"},{"label":"Квартира","name":"flat","value":"flat","id":"flat_type"},{"label":"Апартаменты","name":"apartment","value":"apartment","id":"apartment_type"}]},"estate_rooms":{"legend":"Количество комнат","name":"rooms","items":[{"label":"Любое","value":"any","id":"any_room"},{"label":"1","value":"1","id":"one_room"},{"label":"2","value":"2","id":"two_room"},{"label":"3","value":"3","id":"three_room"},{"label":"4","value":"4","id":"four_room"},{"label":"5+","value":"five_and_more","id":"five_and_more"}]},"estate_area_name":"estate-area","laptop_type":{"legend":"Тип ноутбука","items":[{"name":"ultra","value":"ultrabook","id":"ultra_type","label":"Ультрабук"},{"name":"home","value":"home","id":"home_type","label":"Домашний ноутбук"},{"name":"gaming","value":"gaming","id":"gaming_type","label":"Игровой ноутбук"}]},"laptop_ram":{"legend":"Минимальный объем оперативной памяти","name":"ram","items":[{"value":"any","id":"any_ram","label":"Любой"},{"value":"4","id":"4gb","label":"4 Гб"},{"value":"8","id":"8gb","label":"8 Гб"},{"value":"16","id":"16gb","label":"16 Гб"}]},"laptop_screen_size":{"legend":"Минимальная диагональ экрана","name":"diagonal","items":[{"value":"any","id":"any_diagonal","label":"Любая"},{"value":"13","id":"13in","label":"13","sup":"″"},{"value":"14","id":"14in","label":"14","sup":"″"},{"value":"15","id":"15in","label":"15","sup":"″"},{"value":"17","id":"17in","label":"17","sup":"″"}]},"laptop_cpu":{"legend":"Тип процессора","items":[{"name":"i3","value":"i3","id":"i3","label":"Intel Core i3"},{"name":"i5","value":"i5","id":"i5","label":"Intel Core i5"},{"name":"i7","value":"i7","id":"i7","label":"Intel Core i7"}]},"camera_type":{"legend":"Тип фотоаппарата","items":[{"value":"slr","name":"slr","id":"slr","label":"Зеркальный"},{"value":"digital","name":"digital","id":"digital","label":"Цифровой"},{"value":"mirrorless","name":"mirrorless","id":"mirrorless","label":"Беззеркальный"}]},"camera_matrix_resolution":{"header":"Минимальное разрешение матрицы","id":"matrix-resolution","name":"matrix-resolution","items":[{"value":"any","title":"Любое"},{"value":"14","title":"14 МП"},{"value":"24","title":"24 МП"}]},"camera_video_resolution":{"header":"Минимальное разрешение видео","id":"video-resolution","name":"video-resolution","items":[{"value":"any","title":"Любое"},{"value":"hd","title":"HD"},{"value":"full-hd","title":"Full HD"},{"value":"4K","title":"4K"},{"value":"5K","title":"5K"}]},"car_year":{"header":"Минимальный год выпуска","id":"year-production","name":"year-production","items":[{"value":"any","title":"Любой"},{"value":"1950","title":"1950"},{"value":"2000","title":"2000"},{"value":"2010","title":"2010"},{"value":"2015","title":"2015"},{"value":"2016","title":"2016"},{"value":"2017","title":"2017"},{"value":"2018","title":"2018"},{"value":"2019","title":"2019"},{"value":"2020","title":"2020"}]},"car_transmission":{"legend":"Коробка передач","name":"transmission","items":[{"label":"Любая","value":"any","id":"any_gearbox"},{"label":"Механика","value":"mechanic","id":"mechanic_gearbox"},{"label":"Автомат","value":"auto","id":"auto_gearbox"}]},"car_body_type":{"legend":"Тип кузова","items":[{"label":"Седан","value":"sedan","name":"sedan","id":"sedan"},{"label":"Универсал","value":"universal","name":"universal","id":"universal"},{"label":"Хэтчбэк","value":"hatchback","name":"hatchback","id":"hatchback"},{"label":"Внедорожник","value":"suv","name":"suv","id":"suv"},{"label":"Купе","value":"coupe","name":"coupe","id":"coupe"}]}}')},374:function(e){"use strict";e.exports=JSON.parse('{"common":{"message":"Мы не нашли товары по вашему запросу.","notion":"Попробуйте поменять фильтры настройки объявлений в блоке слева..."},"favourites":{"message":"У вас пока нет избранных товаров. Чтобы отметить товар, кликните на сердечко в карточке объявления.","notion":"Вы можете вернуться к списку всех товаров, кликнув ещё раз на «Показать избранные»"}}')}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e+"../"}(),function(){"use strict";class e{constructor(){if(new.target===e)throw new Error("Can't instantiate AbstractView, only concrete one.");this.element=null}getTemplate(){throw new Error("AbstractView method not implemented: getTemplate")}getElement(){return this.element||(this.element=l(this.getTemplate())),this.element}removeElement(){this.element=null}}const t="prepend",s="append",a="before",r="after",n=t=>t instanceof e?t.getElement():t,o=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;switch(o){case a:n(e).before(n(i));break;case t:n(e).prepend(n(i));break;case r:n(e).after(n(i));break;default:n(e).append(n(i))}},l=e=>{const t=document.createElement("div");return t.innerHTML=e,t.firstChild},c={presentResults(){throw new Error("Mediator method not implemented: PRESENT_RESULTS")},disableFilters(){throw new Error("Mediator method not implemented: DISABLE_FILTERS")},enableFilters(){throw new Error("Mediator method not implemented: ENABLE_FILTERS")},removePreloader(){throw new Error("Mediator method not implemented: REMOVE_PRELOADER")}},u=i(784);class h extends e{constructor(e){super(),this.parameters=e}getTemplate(){return e=this.parameters,u(e);var e}}var d=i(206),p=i(681);class m{constructor(){this.products=null,this.category=null,this.currentProducts=null,this.previousResults=null,this.sortingValue=null}setProducts(e){return fetch(e,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8","X-Master-Key":"$2b$10$fXhUIV39XLHAl6MfESXDBeX4lJaGpFF8BajxmplmnCh4ywBJgEGhi"}}).then((e=>e.json())).then((e=>(this.products=e.record,this.products)))}setCategory(e){this.category=e}getCategory(){return this.category}getAllProducts(){return Array.from(this.products)}getEstate(){return(0,d.rH)(this.products,p.a.ESTATE)}getLaptops(){return(0,d.rH)(this.products,p.a.LAPTOPS)}getCamera(){return(0,d.rH)(this.products,p.a.CAMERA)}getCars(){return(0,d.rH)(this.products,p.a.CARS)}setCurrentProducts(e){this.currentProducts=e}getCurrentProducts(){return this.currentProducts}setSortingValue(e){this.sortingValue=e}getSortingValue(){return this.sortingValue}setPreviousResults(e){this.previousResults=e}getPreviousResults(){return this.previousResults}}const v=i(518);class _ extends e{constructor(e){super(),this.parameters=e}getTemplate(){return e=this.parameters,v(e);var e}}const g=i(829);class f extends e{getTemplate(){return g()}}class b{constructor(e,t){this.container=e,this.position=t,this.view=null}initiate(){this.view=new f,o(this.container,this.view.getElement(),this.position)}remove(){this.view.getElement().remove(),this.view.removeElement()}}const y=(e,t)=>{let i=null;return function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];clearTimeout(i),i=setTimeout((()=>{e.apply(this,a)}),t)}},w=(e,t)=>{let i=null;return function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];i||(i=setTimeout((()=>{e.apply(this,a),clearTimeout(i),i=null}),t))}};class x{constructor(){this.subscribers=[]}subscribe(e){this.subscribers.push(e)}unsubscribe(e){this.subscribers=this.subscribers.filter((t=>t!==e))}}const C=i(487);class k extends e{constructor(e){super(),this.parameters=e}getTemplate(){return e=this.parameters,C(e);var e}getButton(){return this.getElement().querySelector(".js-filter__button")}setButtonHandler(e){this.getButton().addEventListener("click",(t=>{t.preventDefault(),e()}))}}const E=i(70);class P extends e{constructor(e){super(),this.parameters=e}getTemplate(){return e=this.parameters,E(e);var e}getSelectOptions(){return this.getElement().querySelector(".js-select__options")}optionsChangeHandler(e){this.getSelectOptions().addEventListener("change",e)}}class S{constructor(e,t,i){this.container=e,this.parameters=t,this.position=i,this.view=null}initiate(e){this.parameters.selectedOption=e||!1,this.view=new P(this.parameters),o(this.container,this.view,this.position)}setSelectChangeHandler(e){this.view.optionsChangeHandler(e)}}const A=(e,t,i)=>{const s=document.createElement(e);return t&&(s.className=t),i instanceof Array&&2===i.length&&s.setAttribute("data-"+i[0],i[1]),s},T=(e,t,i)=>{t.split(", ").forEach((t=>{e[t]=i,document.addEventListener(t,e[t])}))},R=(e,t)=>{t.split(", ").forEach((t=>{document.removeEventListener(t,e[t])}))};class N{constructor(e){this.activePointer=null,this.connection=null,this.piece=null,this.input=null,this.inputDisplay=null,this.keyStep=null,this.lane=null,this.leftPointer=null,this.min=null,this.max=null,this.rightPointer=null,this.pointers=null,this.pointerWidth=null,this.shift=null,this.slider=null,this.sliderLeft=null,this.sliderWidth=null,this.timer=null,this.values={start:null,end:null},this.Arrow={left:"ArrowLeft",right:"ArrowRight"},this.theDocumentEvents={},this.config={disabled:!1,keyStep:1,onChange:null,start:null,step:1,target:null,values:null};for(let t in this.config)Object.prototype.hasOwnProperty.call(e,t)&&(this.config[t]=e[t]);this.cls={container:"AS",connection:"AS__connection",disabled:"AS--disabled",lane:"AS__lane",pointer:"AS__pointer",sliding:"AS--sliding"},this.destroy=this.destroy.bind(this),this.getValue=this.getValue.bind(this),this._initiate()}_initiate(){if("object"!=typeof this.config.target)return console.log("Cannot find target element...");if(this.input=this.config.target,this.inputDisplay=getComputedStyle(this.input).display,this.input.style.display="none","object"!=typeof this.config.values||!this.config.values)return console.log("Object of the values not defined");return Object.prototype.hasOwnProperty.call(this.config.values,"min")&&Object.prototype.hasOwnProperty.call(this.config.values,"max")?this._createSlider():console.log("Missing min or max value...")}_createSlider(){this.slider=A("div",this.cls.container),this.lane=A("div",this.cls.lane),this.connection=A("div",this.cls.connection),this.leftPointer=A("div",this.cls.pointer,["pointer","left"]),this.rightPointer=A("div",this.cls.pointer,["pointer","right"]),this.slider.append(this.lane),this.slider.append(this.connection),this.slider.append(this.leftPointer),this.slider.append(this.rightPointer),this.input.parentNode.append(this.slider),this.sliderLeft=this.slider.getBoundingClientRect().left,this.sliderWidth=this.slider.clientWidth,this.pointerWidth=this.leftPointer.offsetWidth,this._setInitialValues()}_setInitialValues(){if(this.disable(this.config.disabled),this.min=this.config.values.min,this.max=this.config.values.max,this.config.values=(e=>{let t=[],i=e.values.max-e.values.min;if(!e.step)return!1;const s=i/e.step;for(let i=0;i<s;i++)t.push(e.values.min+i*e.step);return-1===t.indexOf(e.values.max)&&t.push(e.values.max),t})(this.config),!this.config.values)return console.log("No step defined...");if(this.config.values.length<2)return console.log("Need to set the correct values...");if(this.values.start=0,this.values.end=this.config.values.length-1,(e=this.config).start instanceof Array&&e.start&&!(e.start.length<1)&&-1!==e.values.indexOf(e.start[0])){const e=this.config.start;this.values.start=this.config.values.indexOf(e[0]),this.config.start[1]&&(this.values.end=this.config.values.indexOf(e[1]))}var e;this.pointers=this.slider.querySelectorAll(".".concat(this.cls.pointer)),this.pointers.forEach((e=>{e.setAttribute("tabindex","0"),e.setAttribute("role","slider"),e.setAttribute("aria-orientation","horizontal")})),this._addEvents()}_setValues(){return this.piece=this.sliderWidth/(this.config.values.length-1),this.values.start>=this.values.end&&this.activePointer===this.leftPointer&&(this.values.start=this.values.end),this.values.start>=this.values.end&&this.activePointer===this.rightPointer&&(this.values.end=this.values.start),this.leftPointer.style.transform="translateX(".concat(this.values.start*this.piece-this.pointerWidth/2,"px)"),this.rightPointer.style.transform="translateX(".concat(this.values.end*this.piece-this.pointerWidth/2,"px)"),this.connection.style.width="".concat((this.values.end-this.values.start)*this.piece,"px"),this.connection.style.transform="translateX(".concat(this.values.start*this.piece,"px)"),this.leftPointer.setAttribute("aria-label","Левый бегунок"),//!
this.leftPointer.setAttribute("aria-valuemin",this.min),this.leftPointer.setAttribute("aria-valuemax",this.config.values[this.values.end]),this.leftPointer.setAttribute("aria-valuenow",this.config.values[this.values.start]),this.leftPointer.setAttribute("aria-valuetext",this.config.values[this.values.start]),this.rightPointer.setAttribute("aria-label","Правый бегунок"),//!
this.rightPointer.setAttribute("aria-valuemin",this.config.values[this.values.start]),this.rightPointer.setAttribute("aria-valuemax",this.max),this.rightPointer.setAttribute("aria-valuenow",this.config.values[this.values.end]),this.rightPointer.setAttribute("aria-valuetext",this.config.values[this.values.end]),this.input.value="".concat(this.config.values[this.values.start],", ").concat(this.config.values[this.values.end]),this.onChange()}_addEvents(){return this.pointers.forEach((e=>{e.addEventListener("focus",this._focus.bind(this)),e.addEventListener("blur",this._blur.bind(this)),e.addEventListener("dragstart",this._dragstart.bind(this)),e.addEventListener("mousedown",this._drag.bind(this)),e.addEventListener("touchstart",this._touchstart.bind(this)),e.addEventListener("touchmove",this._move.bind(this)),e.addEventListener("touchcancel",this._touchend.bind(this)),e.addEventListener("touchend",this._touchend.bind(this))})),this.lane.addEventListener("mousedown",this._down.bind(this)),this.connection.addEventListener("mousedown",this._down.bind(this)),window.addEventListener("resize",this._resize.bind(this)),this._setValues()}_getActivePointer(e){const t=e.target.getAttribute("data-pointer");"left"===t&&(this.activePointer=this.leftPointer),"right"===t&&(this.activePointer=this.rightPointer)}_dragstart(e){e.preventDefault()}_drag(e){this.config.disabled||(this._getActivePointer(e),this.shift=e.clientX-this.activePointer.getBoundingClientRect().left,this.slider.classList.contains(this.cls.sliding)&&this.slider.classList.remove(this.cls.sliding),T(this.theDocumentEvents,"mousemove",this._move.bind(this)),T(this.theDocumentEvents,"mouseup",this._drop.bind(this)))}_drop(e){e.preventDefault(),R(this.theDocumentEvents,"mousemove, mouseup")}_touchstart(e){this.config.disabled||(this._getActivePointer(e),this.shift=e.touches[0].clientX-this.activePointer.getBoundingClientRect().left,this.slider.classList.contains(this.cls.sliding)&&this.slider.classList.remove(this.cls.sliding))}_touchend(e){this.config.disabled||(e.preventDefault(),this.activePointer=null)}_focus(e){this.config.disabled||(this._getActivePointer(e),T(this.theDocumentEvents,"keydown",this._keydown.bind(this)))}_blur(){this.config.disabled||(this.activePointer=null,R(this.theDocumentEvents,"keydown"))}_getPoint(e,t){if(!t)throw new Error("No action defined...");let i=null;const s="touchmove"===e.type?e.touches[0].clientX:e.clientX,a=this.activePointer===this.leftPointer?this.values.start:this.values.end;switch(this.keyStep=this.config.keyStep,t){case"move":i=s-this.sliderLeft+(this.pointerWidth/2-this.shift),i=Math.round(i/this.piece);break;case"down":i=Math.round((s-this.sliderLeft)/this.piece);break;case"right":i=Math.round(a+this.keyStep);break;case"left":i=Math.round(a-this.keyStep)}return i<=0&&(i=0),i>this.config.values.length-1&&(i=this.config.values.length-1),i}_move(e){if(e.preventDefault(),!this.activePointer||this.config.disabled)return!1;const t=this._getPoint(e,"move");return this.activePointer===this.leftPointer&&(this.values.start=t),this.activePointer===this.rightPointer&&(this.values.end=t),this._setValues()}_keydown(e){if(this.config.disabled)return;let t=null;return e.key===this.Arrow.right||e.key===this.Arrow.left?(e.key===this.Arrow.right&&(t=this._getPoint(e,"right")),e.key===this.Arrow.left&&(t=this._getPoint(e,"left")),this.activePointer===this.leftPointer&&(this.values.start=t),this.activePointer===this.rightPointer&&(this.values.end=t),this._setValues()):void 0}_down(e){if(this.config.disabled)return;e.preventDefault();const t=this._getPoint(e,"down");return this.slider.classList.contains(this.cls.sliding)||this.slider.classList.add(this.cls.sliding),t-this.values.start<=this.values.end-t?this.values.start=t:this.values.end=t,this._setValues()}_resize(){return this.sliderLeft=this.slider.getBoundingClientRect().left,this.sliderWidth=this.slider.clientWidth,this.slider.classList.contains(this.cls.sliding)&&this.slider.classList.remove(this.cls.sliding),this._setValues()}disable(e){this.config.disabled=e,this.slider.classList[e?"add":"remove"](this.cls.disabled)}onChange(){"function"==typeof this.config.onChange&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.config.onChange(this.input.value)))}getValue(){return this.input.value}destroy(){this.input.style.display=this.inputDisplay,this.slider.remove()}}const O=i(881);class M extends e{constructor(e){super(),this.slider=null,this.parameters=e,this.writeValues=this.writeValues.bind(this),this.initiateSlider=this.initiateSlider.bind(this)}getTemplate(){return e=this.parameters,O(e);var e}getRangeInput(){return this.getElement().querySelector(".range__input")}getRangeResults(){return this.getElement().querySelectorAll(".range__tooltip--result")}writeValues(e){const t=e.split(", ");for(let e=0;e<this.getRangeResults().length;e++)this.getRangeResults()[e].innerText=Number(t[e]).toLocaleString()}initiateSlider(e){this.slider=new N(e)}}class j{constructor(e,t,i){this.contaienr=e,this.position=t,this.parameters=i,this.view=null,this.products=null,this.step=null,this.target=null,this.prices=[],this.data={}}initiate(e,t){this.products=e,this.step=t,this.view=new M(this.parameters),this.target=this.view.getRangeInput(),this._setPrices(this.products),this._setData(this.view.writeValues,this.step),o(this.contaienr,this.view,this.position),this.renderSlider()}_setPrices(e){e.forEach((e=>this.prices.push(e.price)))}_setData(e,t){this.data.target=this.target,this.data.values={min:this._getMinPrice(),max:this._getMaxPrice()},this.data.step=t,this.data.onChange=t=>{e(t)}}_getMinPrice(){return Math.min.apply(this,this.prices)}_getMaxPrice(){return Math.max.apply(this,this.prices)}renderSlider(){this.view.initiateSlider(this.data)}disable(){this.view.slider.disable(!0)}enable(){this.view.slider.disable(!1)}remove(){this.view.slider.destroy(),this.view.getElement().remove(),this.view.removeElement()}}const $=i(217);class F extends e{constructor(e){super(),this.parameters=e,this.setEstateAreaFieldHandler()}getTemplate(){return e=this.parameters,$(e);var e}getEstateAreaField(){return this.getElement().querySelector(".js-estate__area-field")}setEstateAreaFieldHandler(){this.getEstateAreaField().addEventListener("input",this._onEstateAreaFieldInput)}_onEstateAreaFieldInput(e){e.target.value=e.target.value.replace(/^0|\D/g,"")}}class I{constructor(e,t,i){this.container=e,this.position=i,this.parameters=t,this.view=null}initiate(){this.view=new F(this.parameters),o(this.container,this.view,this.position)}remove(){this.view.getElement().remove(),this.view.removeElement()}}const H=i(51);class D extends e{getTemplate(){return H()}}class B{constructor(e,t){this.container=e,this.position=t,this.view=null}initiate(){this.view=new D,o(this.container,this.view,this.position)}remove(){this.view.getElement().remove(),this.view.removeElement()}}const q=i(859);class z extends e{getTemplate(){return q()}}const V=i(81);class G{constructor(e,t){this.container=e,this.position=t,this.view=null}initiate(){this.view=new z,o(this.container,this.view,this.position),this._renderSelect(V.camera_matrix_resolution,V.camera_matrix_resolution.items[0].value),this._renderSelect(V.camera_video_resolution,V.camera_video_resolution.items[0].value)}_renderSelect(e,t,i){const s=Object.assign(e,{parent:"camera"});new S(this.view,s,i).initiate(t)}remove(){this.view.getElement().remove(),this.view.removeElement()}}const W=i(14);class J extends e{constructor(e){super(),this.parameters=e}getTemplate(){return e=this.parameters,W(e);var e}}const K=i(81);class U{constructor(e,t,i){this.container=e,this.position=i,this.parameters=t,this.view=null,this.selectController=null}initiate(){this.view=new J(this.parameters),o(this.container,this.view,this.position),this._renderSelect()}_renderSelect(){const e=Object.assign(K.car_year,{parent:"car"});this.selectController=new S(this.view,e,t),this.selectController.initiate(K.car_year.items[0].value)}remove(){this.view.getElement().remove(),this.view.removeElement()}}class X{constructor(e,t,i){this.container=e,this.model=t,this.position=i,this.name="filter",this.view=null,this.filters=null,this.selectController=null,this.rangeController=null,this.estateController=null,this.laptopController=null,this.cameraController=null,this.carController=null,this.onButtonClick=this.onButtonClick.bind(this),this.onSelectChange=this.onSelectChange.bind(this)}initiate(e){this.model.setCategory(p.a.ALL),this.filters=new x,this.view=new k(e),o(this.container,this.view,this.position),this._setHandlers(),this._renderSelect(),this._renderRangeSlider(this.model.getAllProducts(),1e5),this._updateMediator()}_setHandlers(){this.view.setButtonHandler(y(this.onButtonClick),250)}_updateMediator(){this.disable=this.disable.bind(this),this.enable=this.enable.bind(this),c.disableFilters=this.disable,c.enableFilters=this.enable}_renderSelect(){const e=Object.assign(p.b);e.parent=this.name,this.selectController=new S(this.view.getButton(),e,a),this.selectController.initiate(this.model.getCategory()),this.selectController.setSelectChangeHandler(this.onSelectChange)}_renderRangeSlider(e,t){this.rangeController=new j(this.view.getButton(),a,{parent:this.name}),this.filters.subscribe(this.rangeController),this.rangeController.initiate(e,t)}_removeFilters(){this.filters.subscribers.forEach((e=>e.remove())),this.filters.subscribers.forEach((e=>this.filters.unsubscribe(e)))}_renderEstateFilter(){this.model.setCategory(p.a.ESTATE),this._removeFilters(),this._renderRangeSlider(this.model.getEstate(),1e5),this.estateController=new I(this.view.getButton(),{parent:this.name},a),this.filters.subscribe(this.estateController),this.estateController.initiate(),c.presentResults(this.model.getEstate())}_renderLaptopsFilter(){this.model.setCategory(p.a.LAPTOPS),this._removeFilters(),this._renderRangeSlider(this.model.getLaptops(),1e3),this.laptopController=new B(this.view.getButton(),a),this.filters.subscribe(this.laptopController),this.laptopController.initiate(),c.presentResults(this.model.getLaptops())}_renderCameraFilter(){this.model.setCategory(p.a.CAMERA),this._removeFilters(),this._renderRangeSlider(this.model.getCamera(),1e3),this.cameraController=new G(this.view.getButton(),a),this.filters.subscribe(this.cameraController),this.cameraController.initiate(),c.presentResults(this.model.getCamera())}_renderCarsFilter(){this.model.setCategory(p.a.CARS),this._removeFilters(),this._renderRangeSlider(this.model.getCars(),1e4),this.carController=new U(this.view.getButton(),{parent:this.name},a),this.filters.subscribe(this.carController),this.carController.initiate(),c.presentResults(this.model.getCars())}_renderAllFilter(){this.model.setCategory(p.a.ALL),this._removeFilters(),this._renderRangeSlider(this.model.getAllProducts(),1e5),c.presentResults(this.model.getAllProducts())}onSelectChange(e){switch(e.target.value){case p.a.ESTATE:this._renderEstateFilter();break;case p.a.LAPTOPS:this._renderLaptopsFilter();break;case p.a.CAMERA:this._renderCameraFilter();break;case p.a.CARS:this._renderCarsFilter();break;case p.a.ALL:default:this._renderAllFilter()}}onButtonClick(){switch(this.model.getCategory()){case p.a.ALL:c.presentResults((0,d.ce)(this.model.getAllProducts()));break;case p.a.ESTATE:c.presentResults((0,d.xw)(this.model.getEstate()));break;case p.a.LAPTOPS:c.presentResults((0,d.Gg)(this.model.getLaptops()));break;case p.a.CAMERA:c.presentResults((0,d.K5)(this.model.getCamera()));break;case p.a.CARS:c.presentResults((0,d.vm)(this.model.getCars()))}}disable(){this.view.getElement().querySelectorAll("input").forEach((e=>{e.setAttribute("disabled",!0)})),this.view.getElement().querySelectorAll("select").forEach((e=>{e.setAttribute("disabled",!0)})),this.view.getButton().setAttribute("disabled",!0),this.rangeController.disable()}enable(){this.view.getElement().querySelectorAll("input").forEach((e=>{e.removeAttribute("disabled")})),this.view.getElement().querySelectorAll("select").forEach((e=>{e.removeAttribute("disabled")})),this.view.getButton().removeAttribute("disabled"),this.rangeController.enable()}}var Z=i(406);const Y=i(102);class Q extends e{constructor(e){super(),this.parameters=e,this.cls={favorite:{active:"results__favorite--active"}}}getTemplate(){return e=this.parameters,Y(e);var e}getFavoriteButton(){return this.getElement().querySelector(".js-results__favorite")}getResultsContainer(){return this.getElement().querySelector(".js-results__container")}getSortingElements(){return this.getElement().querySelector(".js-results__form").elements["results-sorting"]}setSortingHandler(e){this.getSortingElements().forEach((t=>t.addEventListener("change",e)))}setFavoriteButtonClickHandler(e){this.getFavoriteButton().addEventListener("click",e)}}var ee=i(564);const te=i(423),ie=e=>"".concat(ee.dL).concat(e,".webp,\n    ").concat(ee.dL).concat(e,"@2x.webp 2x,\n    ").concat(ee.dL).concat(e,"@3x.webp 3x,\n    ").concat(ee.dL).concat(e,"@4x.webp 4x,"),se=e=>"".concat(ee.dL).concat(e,"@2x.jpg 2x,\n    ").concat(ee.dL).concat(e,"@3x.jpg 3x,\n    ").concat(ee.dL).concat(e,"@4x.jpg 4x");class ae extends e{constructor(e){super(),this.parameters=e,this.frames=(0,ee.ps)(e.photos),this._onNavigationItemsMouseEnter=this._onNavigationItemsMouseEnter.bind(this),this._onNavigationMouseLeave=this._onNavigationMouseLeave.bind(this),this._showMorePhotos=this._showMorePhotos.bind(this),this._hideMorePhotos=this._hideMorePhotos.bind(this),this.setMouseEventsHandler()}getTemplate(){return e=this.parameters,te(e);var e}getNavigation(){return this.getElement().querySelector(".js-product__navigation")}getPictureSource(){return this.getNavigation().querySelector(".js-product__picture > source")}getImage(){return this.getNavigation().querySelector(".js-product__image")}getNavigationItems(){return this.getNavigation().querySelectorAll(".js-product__navigation-item")}getNavigationLastItem(){return this.getNavigationItems()[this.getNavigationItems().length-1]}getProductLink(){return this.getElement().querySelector(".js-product__link")}getMorePhotos(){return this.getNavigation().querySelector(".js-product__more-photos")}setMouseEventsHandler(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;this.getNavigationItems().forEach((t=>t.addEventListener("mouseenter",y(this._onNavigationItemsMouseEnter,e)))),this.getNavigation().addEventListener("mouseleave",y(this._onNavigationMouseLeave,e)),this.getNavigationLastItem().addEventListener("mouseenter",y(this._showMorePhotos,e)),this.getNavigationLastItem().addEventListener("mouseleave",y(this._hideMorePhotos,e))}setNavigationClickHandler(e){this.getNavigation().addEventListener("click",e)}setTitleClickHandler(e){this.getProductLink().addEventListener("click",(t=>{t.preventDefault(),e(t)}))}_onNavigationItemsMouseEnter(e){this.getImage().dataset.imgName!==this.frames[e.target.dataset.frame]&&(this.getImage().dataset.imgName=this.frames[e.target.dataset.frame],this.getImage().src="".concat(ee.dL).concat(this.frames[e.target.dataset.frame],".jpg"),this.getPictureSource().setAttribute("srcset",ie(this.frames[e.target.dataset.frame])),this.getImage().setAttribute("srcset",se(this.frames[e.target.dataset.frame])))}_onNavigationMouseLeave(){this.getImage().dataset.imgName!==this.frames[0]&&(this.getImage().dataset.imgName=this.frames[0],this.getImage().src="".concat(ee.dL).concat(this.frames[0],".jpg"),this.getPictureSource().setAttribute("srcset",ie(this.frames[0])),this.getImage().setAttribute("srcset",se(this.frames[0])))}_showMorePhotos(){this.getMorePhotos()&&!this.getMorePhotos().classList.contains("product__more-photos--shown")&&this.getMorePhotos().classList.add("product__more-photos--shown")}_hideMorePhotos(){this.getMorePhotos()&&this.getMorePhotos().classList.contains("product__more-photos--shown")&&this.getMorePhotos().classList.remove("product__more-photos--shown")}}const re="#666666",ne={ICON:{iconUrl:i.p+"img/pin.svg",iconSize:[34,34]},TILE:{img:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a>'},CONTROL_ZOOM:{zoomInText:'<svg style="transform: translate(-1px, 1px)" width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true" role="presentation">\n       <g>\n        <rect width="16" height="4" fill='.concat(re,' transform="translate(0, 6)"/>\n        <rect width="16" height="4" fill=').concat(re,' transform="rotate(90) translate(0, -10)"/>\n      </g>\n    </svg>'),zoomOutText:'<svg style="transform: translate(-1px, 1px)" width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true" role="presentation">\n      <rect width="16" height="4" fill='.concat(re,' transform="translate(0, 6)"/>\n    </svg>'),zoomInTitle:"",zoomOutTitle:""}},oe=i(3),le=i(564).dL;class ce extends e{constructor(e){super(),this.parameters=e}getTemplate(){return e=this.parameters,oe(e);var e}getSourceSrcsetTemplate(e){return(e=>"".concat(le).concat(e,".webp,\n    ").concat(le).concat(e,"@2x.webp 2x,\n    ").concat(le).concat(e,"@3x.webp 3x,\n    ").concat(le).concat(e,"@4x.webp 4x"))(e)}getImgSrcsetTemplate(e){return(e=>"".concat(le).concat(e,"@2x.jpg 2x,\n    ").concat(le).concat(e,"@3x.jpg 3x,\n    ").concat(le).concat(e,"@4x.jpg 4x,"))(e)}getImgSrcTemplate(e){return(e=>"".concat(le).concat(e,".jpg"))(e)}getPopupInner(){return this.getElement().querySelector(".js-popup__inner")}getButtonCross(){return this.getElement().querySelector(".js-popup__button-cross")}getGalleryList(){return this.getElement().querySelector(".js-popup__gallery-list")}getMainPicture(){return this.getElement().querySelector(".js-popup__main-picture")}getMainImage(){return this.getMainPicture().querySelector("img")}getMap(){return this.getElement().querySelector("#map-".concat(this.parameters.id))}setButtonCross(e){this.getButtonCross().addEventListener("click",e)}setGalleryListHandler(e){this.getGalleryList().addEventListener("click",e)}}const ue=i(16);class he extends e{constructor(e){super(),this.parameters=e}getTemplate(){return e=this.parameters,ue(e);var e}getFavoriteCheckbox(){return this.getElement().querySelector(".js-favorite__checkbox")}setFavoriteCheckboxChangeHandler(e){this.getFavoriteCheckbox().addEventListener("change",e)}}const de="favorites";class pe{constructor(e,t,i){this.container=e,this.parameters=t,this.position=i,this.view=null,this.onFavoriteCheckboxChange=this.onFavoriteCheckboxChange.bind(this)}initiate(){this.view=new he(this.parameters),this._setHandlers(),this._initiateToggle(),o(this.container,this.view,this.position)}_remove(){this.view.getElement().remove(),this.view.removeElement()}_setHandlers(){this.view.setFavoriteCheckboxChangeHandler(this.onFavoriteCheckboxChange)}_initiateToggle(){localStorage.getItem(de)&&JSON.parse(localStorage.getItem(de)).find((e=>e===this.parameters.id))&&(this.view.getFavoriteCheckbox().checked="true")}_checkToggles(e){document.querySelectorAll("input[name=".concat(e.target.name,"]")).forEach((t=>{t.checked!==e.target.checked&&(t.checked=e.target.checked)}))}_shakeLocalStorage(){if(!localStorage.getItem(de))return void localStorage.setItem(de,JSON.stringify([this.parameters.id]));let e=JSON.parse(localStorage.getItem(de));if(e.find((e=>e===this.parameters.id)))return e=e.filter((e=>e!==this.parameters.id)),void localStorage.setItem(de,JSON.stringify(e));e.push(this.parameters.id),localStorage.setItem(de,JSON.stringify(e))}onFavoriteCheckboxChange(e){this._shakeLocalStorage(),this._checkToggles(e)}}class me{constructor(e,t,i){this.container=e,this.parameters=t,this.position=i,this.view=null,this.map=null,this.favoriteController=null,this.onEscDown=this.onEscDown.bind(this),this.onDocumentClick=this.onDocumentClick.bind(this),this.onButtonCrossClick=this.onButtonCrossClick.bind(this),this.onGalleryListClick=this.onGalleryListClick.bind(this)}initiate(){this.view=new ce(this.parameters),this._setHandlers(),o(this.container,this.view,this.position),this._renderMap(),this._renderFavorite()}_remove(){this.view.getElement().remove(),this.view.removeElement(),document.removeEventListener("keydown",this.onEscDown),document.removeEventListener("click",this.onDocumentClick)}_setHandlers(){this.view.setButtonCross(this.onButtonCrossClick),this.view.setGalleryListHandler(this.onGalleryListClick),document.addEventListener("keydown",this.onEscDown),document.addEventListener("click",this.onDocumentClick)}_renderFavorite(){const e={parent:"popup",id:this.parameters.id,modifier:"large"};this.favoriteController=new pe(this.view.getMainPicture().parentNode,e),this.favoriteController.initiate()}_renderMap(){this.map=L.map(this.view.getMap(),{center:this.parameters.coordinates,zoom:11,zoomControl:!1}),L.control.zoom({zoomInText:ne.CONTROL_ZOOM.zoomInText,zoomOutText:ne.CONTROL_ZOOM.zoomOutText,zoomInTitle:ne.CONTROL_ZOOM.zoomInTitle,zoomOutTitle:ne.CONTROL_ZOOM.zoomOutTitle}).addTo(this.map),L.tileLayer(ne.TILE.img,{attribution:ne.TILE.attribution}).addTo(this.map),L.marker(this.parameters.coordinates,{icon:L.icon({iconUrl:ne.ICON.iconUrl,iconSize:ne.ICON.iconSize})}).addTo(this.map),L.control.zoom().remove()}onEscDown(e){"Escape"!==e.key&&"Escape"!==e.code||this._remove()}onDocumentClick(e){this.view.getPopupInner().contains(e.target)||this._remove()}onButtonCrossClick(){this._remove()}onGalleryListClick(e){"IMG"===e.target.tagName&&this.view.getMainImage().dataset.imgName!==e.target.dataset.imgName&&(this.view.getMainPicture().querySelector("source").srcset=this.view.getSourceSrcsetTemplate(e.target.dataset.imgName),this.view.getMainImage().srcset=this.view.getImgSrcsetTemplate(e.target.dataset.imgName),this.view.getMainImage().src=this.view.getImgSrcTemplate(e.target.dataset.imgName),this.view.getMainImage().dataset.imgName=e.target.dataset.imgName)}}class ve{constructor(e,t,i){this.container=e,this.parameters=t,this.position=i,this.view=null,this.popupController=null,this.favoriteController=null,this.showPopup=this.showPopup.bind(this)}initiate(){this.view=new ae(this.parameters),o(this.container,this.view,this.position),this._setHandlers(),this._renderFavorite()}_setHandlers(){this.view.setNavigationClickHandler(this.showPopup),this.view.setTitleClickHandler(this.showPopup)}_renderFavorite(){const e={parent:"product",id:this.parameters.id};this.favoriteController=new pe(this.view,e),this.favoriteController.initiate()}showPopup(e){e.stopPropagation(),this.popupController=new me(document.body,this.parameters),this.popupController.initiate()}remove(){this.view.getElement().remove(),this.view.removeElement()}}const _e=i(23);class ge extends e{constructor(e){super(),this.parameters=e}getTemplate(){return e=this.parameters,_e(e);var e}}class fe{constructor(e,t,i){this.container=e,this.parameters=t,this.position=i,this.view=null}initiate(){this.view=new ge(this.parameters),o(this.container,this.view,this.position)}remove(){this.view.getElement().remove(),this.view.removeElement()}}const be=i(374),ye={favorite:!1};class we{constructor(e,t,i){this.container=e,this.model=t,this.position=i,this.view=null,this.controllers=null,this.productController=null,this.infoController=null,this.numberDefaultProducts=7,this.numberLoadedProducts=5,this.currentNumberProducts=0,this.checkPosition=this.checkPosition.bind(this),this.onSortingChange=this.onSortingChange.bind(this),this.onFavoriteButtonClick=this.onFavoriteButtonClick.bind(this)}initiate(e){this.view=new Q(e),o(this.container,this.view,this.position),this.controllers=new x,this.view.getResultsContainer().addEventListener("scroll",w(this.checkPosition,250)),window.addEventListener("resize",w(this.checkPosition,250)),this._setHandlers(),this._updateMediator(),this.model.setSortingValue(Z.SortingValue.POPULAR),this.presentProducts(this.model.getAllProducts())}onSortingChange(e){this.model.setSortingValue(e.target.value),this.model.currentProducts.length&&this.presentProducts(this.model.getCurrentProducts())}onFavoriteButtonClick(){this.view.getFavoriteButton().classList.toggle(this.view.cls.favorite.active),ye.favorite?(c.enableFilters(),this.view.getSortingElements().forEach((e=>e.removeAttribute("disabled"))),this.presentProducts(this.model.getPreviousResults()),ye.favorite=!1):(c.disableFilters(),this.view.getSortingElements().forEach((e=>e.setAttribute("disabled",!0))),this._renderFavorites(),ye.favorite=!0)}_renderFavorites(){const e=JSON.parse(localStorage.getItem(de));if(this._cleanResults(),this.model.setPreviousResults(this.model.getCurrentProducts()),!e||!e.length)return this.model.setCurrentProducts([]),this.infoController=new fe(this.view.getResultsContainer(),be.favourites),void this.infoController.initiate();const t=[];e.forEach((e=>{t.push(this.model.getAllProducts().find((t=>e===t.id)))})),this.model.setCurrentProducts(t),this._renderProducts()}checkPosition(){if(this.currentNumberProducts>=this.model.getCurrentProducts().length)return;const e=this.view.getResultsContainer();e.scrollHeight-(e.scrollTop+e.offsetHeight)<Math.floor(e.offsetHeight/3)&&this._renderProducts()}presentProducts(e){if(this._cleanResults(),this.model.setCurrentProducts((0,Z.sortProducts)(this.model.getSortingValue(),e)),!e.length)return this.infoController=new fe(this.view.getResultsContainer(),be.common),void this.infoController.initiate();this._renderProducts()}_setHandlers(){this.view.setSortingHandler(this.onSortingChange),this.view.setFavoriteButtonClickHandler(this.onFavoriteButtonClick)}_updateMediator(){this.presentProducts=this.presentProducts.bind(this),c.presentResults=this.presentProducts}_cleanResults(){this.controllers.subscribers&&this._removeProducts(),this.infoController&&this.infoController.remove()}_renderProducts(){let e;this.currentNumberProducts?(e=this.model.getCurrentProducts().slice(this.currentNumberProducts,this.currentNumberProducts+this.numberLoadedProducts),this.currentNumberProducts+=this.numberLoadedProducts):(e=this.model.getCurrentProducts().slice(0,this.numberDefaultProducts),this.currentNumberProducts=this.numberDefaultProducts),e.forEach((e=>this._renderProduct(e)))}_removeProducts(){this.controllers.subscribers.forEach((e=>{e.remove(),this.controllers.unsubscribe(e)})),this.currentNumberProducts=0}_renderProduct(e){this.productController=new ve(this.view.getResultsContainer(),Object.assign(e,{parent:"results"})),this.controllers.subscribe(this.productController),this.productController.initiate()}}const xe=document.querySelector(".line"),Ce=new class{constructor(e,t,i){this.container=e,this.parameters=t,this.position=i,this.view=null}initiate(){this.view=new h(this.parameters),o(this.container,this.view,this.position),this._updateMediator()}remove(){this.view.getElement().remove(),this.view.removeElement()}_updateMediator(){this.remove=this.remove.bind(this),c.removePreloader=this.remove}}(document.body,{parent:"page"}),ke=new class{constructor(e,t,i){this.container=e,this.parameters=t,this.position=i,this.view=null,this.model=null,this.pageNotFoundController=null,this.filterController=null,this.resultsController=null,this._successfulRequestHandle=this._successfulRequestHandle.bind(this),this._failedRequestHandle=this._failedRequestHandle.bind(this)}initiate(e){this.model=new m,this.model.setProducts(e).then(this._successfulRequestHandle).catch(this._failedRequestHandle)}_successfulRequestHandle(){this.view=new _(this.parameters),c.removePreloader(),o(this.container,this.view,this.position),this._renderFilter(),this._renderResults()}_failedRequestHandle(e){c.removePreloader(),this._renderLostPage(),console.log(e.message)}_renderLostPage(){this.pageNotFoundController=new b(document.body),this.pageNotFoundController.initiate()}_renderFilter(){this.filterController=new X(this.view,this.model),this.filterController.initiate({parent:"app"})}_renderResults(){this.resultsController=new we(this.view,this.model),this.resultsController.initiate({parent:"app"})}}(xe,{parent:"page"},r);Ce.initiate(),ke.initiate("https://api.jsonbin.io/v3/b/639b205915ab31599e1d02f8")}()}();